{% extends 'partials/base.html' %}
{% block title %}Košarica | Amadeus web trgovina{% endblock %}
{% block content %}

<h1>
    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" class="bi bi-cart3" viewBox="0 0 16 16">
        <path d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .49.598l-1 5a.5.5 0 0 1-.465.401l-9.397.472L4.415 11H13a.5.5 0 0 1 0 1H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5zM3.102 4l.84 4.479 9.144-.459L13.89 4H3.102zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
      </svg>
    Košarica
</h1>
{% if cart|length %}
<div class="mb-3 px-0">
    <div class="row" style="margin: -0.25rem;">
        {% for proizvod in cart_products %}
        <div class="col-6 col-sm-4 col-md-3 col-xl-2 p-1">
            {% with is_cart = true, idx = loop.index-1 %}
            {% include "partials/product_card.html" %}
            {% endwith %}
        </div>
        {% endfor %}
    </div>
</div>

<div class="card p-2 mb-3 mb-lg-4">
    <h2>Promo kod</h2>
    <form class="contact-form input-group mb-3" novalidate>
        <input type="text" class="form-control" name="kod" value="{% if promo_kod %}{{ promo_kod }}{% endif %}" placeholder="promo kod" required>
        <button type="submit" class="btn btn-outline-secondary rounded-end" hx-post="/cart/promocheck" hx-target="#promocheck-resp">
            Unesi <span class="d-none d-md-inline">promo kod</span>
        </button>
        <div class="invalid-feedback mb-2">
            Molimo upišite promo kod
        </div>
    </form>
    <div id="promocheck-resp"></div>

    <h2>Način plaćanja</h2>
    <form>
        <div class="form-check">
            <label class="form-check-label">
                <input class="form-check-input" type="radio" name="nacinplacanja" value="pouzecem"
                hx-post="/cart/setmethod" hx-target="#price_table" hx-swap="outerHTML" {% if cijene.nacinplacanja == "pouzecem" %}checked{% endif %}>
                Plaćanje pouzećem
            </label>
        </div>
        <div class="form-check">
            <label class="form-check-label">
                <input class="form-check-input" type="radio" name="nacinplacanja" value="po-ponudi"
                    hx-post="/cart/setmethod" hx-target="#price_table" hx-swap="outerHTML" {% if cijene.nacinplacanja == "po-ponudi" %}checked{% endif %}>
                Plaćanje uplatom na bankovni račun
            </label>
        </div>
        <div class="form-check">
            <label class="form-check-label">
                <input class="form-check-input" type="radio" name="nacinplacanja" value="karticom"
                    hx-post="/cart/setmethod" hx-target="#price_table" hx-swap="outerHTML" {% if cijene.nacinplacanja == "karticom" %}checked{% endif %}>
                Plaćanje karticom
            </label>
        </div>
    </form>

    {% include "partials/price_table.html" %}

    <div class="d-grid">
        <a href="/checkout" title="Unos podataka za narudžbu" class="btn btn-primary">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-file-earmark-text" viewBox="0 0 16 16">
                <path d="M5.5 7a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1h-5zM5 9.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5z"/>
                <path d="M9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.5L9.5 0zm0 1v2A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5z"/>
            </svg>
            Unos podataka
        </a>
    </div>
</div>
{% else %}
<div class="mb-3 mb-lg-4">
    Vaša košarica je prazna
</div>
{% endif %}

{% endblock %}
