<!doctype html>
<html lang="hr">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!-- meta -->
	<title>{% block title %}{% endblock %}</title>

	<!-- css -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">

	{% block head %}
	{% endblock %}

	<script>
		!function(t,e){var o,n,p,r;e.__SV||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.async=!0,p.src=s.api_host+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="capture identify alias people.set people.set_once set_config register register_once unregister opt_out_capturing has_opted_out_capturing opt_in_capturing reset isFeatureEnabled onFeatureFlags".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]);
		posthog.init('z3vgukdX6nKrOBrASYBVmGikEa2o6U8tYuF9y3QPv4A',{api_host:'https://posthog.bdeak.net'})
	</script>
</head>
<body class="bg-light">
	<style>
		.indicator{display:none;}
		.htmx-request .indicator{display:inline-block;}
		.htmx-request .icon{display:none;}

		/* fix number input */
		input::-webkit-outer-spin-button,
		input::-webkit-inner-spin-button {
			-webkit-appearance: none;
			margin: 0;
		}
		input[type=number] {
			-moz-appearance: textfield;
		}
	</style>
	<!-- header -->
	<header class="shadow-sm bg-white mb-3 mb-lg-4">
		<nav class="navbar navbar-light">
			<div class="container d-flex flex-nowrap">
				<!-- logo -->
				<a class="navbar-brand" href="/">
					<img src="https://amadeus2.hr/img/logo.png" alt="TODO" title="TODO" width="160" height="32">
				</a>
				<div class="flex-grow-1 d-flex justify-content-end">
					<div class="flex-grow-1 d-none d-md-block me-3 ms-1">
						{% with lg=false %}
						{% include "partials/search_box.html" %}
						{% endwith %}
					</div>
					<!-- link to cart -->
					<a href="/cart" class="btn btn-outline-secondary px-2">
						<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-cart3" viewBox="0 0 16 16">
							<path fill-rule="evenodd" d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .49.598l-1 5a.5.5 0 0 1-.465.401l-9.397.472L4.415 11H13a.5.5 0 0 1 0 1H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5zM3.102 4l.84 4.479 9.144-.459L13.89 4H3.102zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-7 1a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm7 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2z" />
						</svg>
						<span class="d-none d-lg-inline">Ko≈°arica</span>
					</a>
					<!-- toggle mobile menu button -->
					<button class="btn btn-outline-secondary px-2 ms-2" type="button" data-bs-toggle="collapse"
						data-bs-target="#navcollapsed" aria-controls="navcollapsed" aria-expanded="false" aria-label="Toggle navigation">
						<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-list" viewBox="0 0 16 16">
							<path fill-rule="evenodd" d="M2.5 11.5A.5.5 0 0 1 3 11h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4A.5.5 0 0 1 3 7h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4A.5.5 0 0 1 3 3h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z" />
						</svg>
					</button>
				</div>
			</div>
		</nav>
		<div class="container mt-1 mt-lg-2">
			<!-- mobile collapsed menu -->
			<div class="collapse row" id="navcollapsed">
				<div class="col-12 col-md-6">
					{% include "partials/category_list.html" %}
				</div>
				<div class="col-12 col-md-6">
					{% include "partials/contact_form.html" %}
					<!-- contact info -->
					<h2>Info</h2>
					<div class="pb-3 pb-lg-4">
						{% include "partials/contact_list.html" %}
					</div>
				</div>
			</div>
			<!-- search box -->
			<div class="pb-2 d-md-none">
				{% with lg=true %}
				{% include "partials/search_box.html" %}
				{% endwith %}
			</div>
		</div>
	</header>

	{% with messages = get_flashed_messages(with_categories=true) %}
	{% if messages %}
	<div class="container">
		{% for category, message in messages %}
		<div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
			{{ message }}
			<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
		</div>
		{% endfor %}
	</div>
	{% endif %}
	{% endwith %}

	<!-- content -->
	<main class="container" role="main">{% block content %}{% endblock %}</main>

	<!-- footer -->
	<footer class="shadow-sm bg-white py-3 py-lg-4">
		<div class="container">
			<div class="row mb-3 mb-lg-4">
				<div class="col-12 accordion mb-3 d-md-none" id="footeraccordion">
					<div class="accordion-item">
						<h2 class="accordion-header" id="headingTwo">
							<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
								data-bs-target="#about" aria-expanded="false" aria-controls="about">
								O Amadeusu
							</button>
						</h2>
						<div id="about" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#footeraccordion">
							<div class="accordion-body">
								{% include "partials/about.html" %}
							</div>
						</div>
					</div>
					<div class="accordion-item">
						<h2 class="accordion-header" id="headingThree">
							<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
								data-bs-target="#informationlist" aria-expanded="false" aria-controls="informationlist">
								Informacije
							</button>
						</h2>
						<div id="informationlist" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#footeraccordion">
							<div class="accordion-body">
								{% include "partials/information_list.html" %}
							</div>
						</div>
					</div>
				</div>
				<div class="col-md-4 d-none d-md-block pt-1">
					{% include "partials/about.html" %}
				</div>
				<div class="col-md-4 d-none d-md-block">
					<h2>Informacije</h2>
					{% include "partials/information_list.html" %}
				</div>
				<div class="col-12 col-md-4">
					{% include "partials/contact_list.html" %}
				</div>
			</div>
			<p class="text-muted text-center mb-1" style="font-size: 0.75rem;">&copy; 1995-{{ today.year }} Amadeus II d.o.o.</p>
		</div>
	</footer>

	<!-- cookie consent TODO -->

	<!-- contact button -->
	<div class="bg-white rounded position-fixed bottom-0 end-0" style="margin-right: calc(var(--bs-gutter-x,.75rem) + 2.6rem + 0.5rem); margin-bottom: var(--bs-gutter-x,.75rem); z-index: 1112;">
		<a href="/contact" class="btn btn-outline-secondary px-2">
			<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-chat-right-text" viewBox="0 0 16 16">
				<path d="M2 1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h9.586a2 2 0 0 1 1.414.586l2 2V2a1 1 0 0 0-1-1H2zm12-1a2 2 0 0 1 2 2v12.793a.5.5 0 0 1-.854.353l-2.853-2.853a1 1 0 0 0-.707-.293H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h12z"/>
				<path d="M3 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM3 6a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 3 6zm0 2.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5z"/>
			</svg>
		</a>
	</div>

	<!-- jump to top button -->
	<div class="bg-white rounded position-fixed bottom-0 end-0" style="margin-right: var(--bs-gutter-x,.75rem); margin-bottom: var(--bs-gutter-x,.75rem); z-index: 1113;">
		<button type="button" class="btn btn-outline-secondary px-2" onclick="window.scrollTo({ top: 0 });">
			<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-chevron-up" viewBox="0 0 16 16">
				<path fill-rule="evenodd" d="M7.646 4.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1-.708.708L8 5.707l-5.646 5.647a.5.5 0 0 1-.708-.708l6-6z"/>
			</svg>
		</button>
	</div>

	<!-- search suggestions -->
	<script>
		timeout_var = null;
		function typeWriter(selector_target, text_list, placeholder = false, i = 0, text_list_i=0, delay_ms=200) {
			if (!i) {
				if (placeholder) {
					document.querySelector(selector_target).placeholder = "";
				}
				else {
					document.querySelector(selector_target).innerHTML = "";
				}
			}
			txt = text_list[text_list_i];
			if (i < txt.length) {
				if (placeholder) {
					document.querySelector(selector_target).placeholder += txt.charAt(i);
				}
				else {
					document.querySelector(selector_target).innerHTML += txt.charAt(i);
				}
				i++;
				setTimeout(typeWriter, delay_ms, selector_target, text_list, placeholder, i, text_list_i);
			}
			else {
				text_list_i++;
				if (typeof text_list[text_list_i] === "undefined")  {
					// set "return;" for disabled infinite loop
					setTimeout(typeWriter, (delay_ms*15), selector_target, text_list, placeholder);
				}
				else {
					i = 0;
					setTimeout(typeWriter, (delay_ms*15), selector_target, text_list, placeholder, i, text_list_i);
				}
			}
		}

		function shuffleArray(array) {
			for (let i = array.length - 1; i > 0; i--) {
				const j = Math.floor(Math.random() * (i + 1));
				[array[i], array[j]] = [array[j], array[i]];
			}
		}

		text_list = [
			"iphone 12",
			"playstation 4",
			"samsung tv",
			"daikin klima",
		];

		shuffleArray(text_list)
		typeWriter("#searchbox", text_list, true);
		typeWriter("#searchbox-lg", text_list, true);
	</script>
	<!-- contact form validation -->
	<script>
		(function () {
			var forms = document.querySelectorAll('.contact-form')
			forms.forEach(function (form) {
				var submitbtn = form.querySelector('[type=submit]')
				submitbtn.addEventListener('click', function (event) {
					if (!form.checkValidity()) {
						event.preventDefault()
						event.stopPropagation()
					}
					form.classList.add('was-validated')
				}, false)
			})
		})()
	</script>
	<script src=" https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
	<script src="https://unpkg.com/htmx.org@1.0.2/dist/htmx.min.js"></script>
</body>
</html>
